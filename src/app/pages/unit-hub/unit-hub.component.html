<!-- HEADER/NAVIGATION -->

<ng-container *ngIf="route.children.length === 0">

    <app-header></app-header>

    <body id="unit-hub">
        <div class="filter-container">
            <!-- first associate DISCRETE VALUES with EACH CHECKBOX to TOGGLE ON/OFF STATE  -->
            <div *ngFor="let t of themesFromCms, let i = index" class="allthemes">

                <!-- || = "or" operation  -->
                <div *ngIf="t.perspective || t.podcast ||Â t.project" id="themes_collection">

                    <!-- when CHECKED, compare CHECKED VALUES against the PROPERTIES found within the ARRAY OF OBJECTS -->
                    <div class="checkbox" >
                        <input type="checkbox"
                            name="toggle-themes"
                            [id]="t.id"
                            [(ngModel)]="t.selected"
                            [value]="t.theme_name"
                            (change)="getSelected()">
                    </div>

                    <label
                        [for]="t.id"
                        id="unit-theme-selected-{{t.id}}"
                        [class.visited]="t.selected"
                        class="themes">
                        {{t.theme_name}}
                    </label>
                </div>
            </div>

            <!-- using ngFor to call a checked method that returns the checked filtered items -->
            <!-- <pre>Selected themes: <span *ngFor="let t of themesSelected" style="padding-right:10px;">{{ t.theme_name }}</span></pre> -->

        </div>

        <div *ngIf="units" class="masonry">

            <!-- FILTER UNITS ACCORDING TO SELECTED THEMES -->
            <div [ngClass]= " { 'perspectives' : u.unit_type === 'perspective',
                                'projects'     : u.unit_type === 'project',
                                'podcasts'     : u.unit_type === 'podcast'   } "
                *ngFor= " let u of units "
                class= "units-container" >

                    <!-- PODCAST UNIT -->
                    <div *ngIf="u.unit_type === 'podcast'" class="unit-content">

                        <!-- PODCAST UNIT > CONTENT SECTION -->
                        <!-- EPISODE > LOGO -->
                        <div *ngIf="u.offline_episode_logo !== null">
                          <img class="offline_podcast_logo" src="{{u.offline_episode_logo.url}}">
                        </div>

                        <!-- EPISODE > TITLE -->
                        <div *ngIf="u.title?.length" class="unit-title" id="podcast-title">
                            <a [routerLink]="['/units/' + u.unit_type, u.id]">{{u.title}}</a>
                        </div>

                        <!-- EPISODE > GUEST SPEAKERS -->
                        <div *ngIf="u.speakers?.length" class="unit-name" id="podcast-speakers" >
                            {{u.speakers}}
                        </div>

                        <!-- PODCAST UNIT > THEMES SECTION -->
                        <div class="unit-theme-container">
                            <div *ngFor="let ut of u.themes"
                                [class.visited]="ut.selected"
                                class="unit-themes" id="podcast-themes">
                                {{ut.theme_name}}
                            </div>
                        </div>

                    </div>

                    <!-- PERSPECTIVE UNIT -->
                    <div *ngIf="u.unit_type === 'perspective'" class="unit-content">

                        <!-- PERSPECTIVE UNIT > CONTENT SECTION -->
                        <!-- ARTICLE > TITLE -->
                        <div class="unit-title" id="perspective-title">
                            <a [routerLink]="['/units/' + u.unit_type, u.id]">{{u.title}}</a>
                        </div>

                        <!-- ARTICLE > AUTHOR -->
                        <div class="unit-name" id="perspective-author" >
                            {{u.author}}
                        </div>

                        <!-- PERSPECTIVE UNIT > THEMES SECTION -->
                        <div class="unit-theme-container">
                            <div *ngFor="let ut of u.themes"
                                [class.visited]="ut.selected"
                                    class="unit-themes" id="perspective-themes">
                                {{ut.theme_name}}
                            </div>
                        </div>

                    </div>

                    <!-- PROJECT UNIT -->
                    <div *ngIf="u.unit_type === 'project'" class="unit-content" >

                        <!-- PROJECT UNIT > CONTENT SECTION -->
                        <!-- PROJECT > THUMBNAIL IMAGE -->
                      <div *ngIf="u.preview_image">
                        <img id="project-thumb-img" src="{{u.preview_image.url}}" style="width: 100%;">
                      </div>

                        <!-- PROJECT > TITLE -->
                        <div class="unit-title" id="project-title">
                            <a [routerLink]="['/units/' + u.unit_type, u.id]">{{u.title}}</a>
                        </div>

                        <!-- PROJECT > ARTIST -->
                        <div class="unit-name" id="project-artist" >
                            {{u.artist}}
                        </div>

                        <!-- PERSPECTIVE UNIT > THEMES SECTION -->
                        <div class="unit-theme-container">
                            <div *ngFor="let ut of u.themes"
                                [class.visited]="ut.selected"
                                    class="unit-themes" id="perspective-themes">
                                {{ut.theme_name}}
                            </div>
                        </div>

                    </div>

            </div>

        </div>

    </body>

</ng-container>


<router-outlet></router-outlet>

