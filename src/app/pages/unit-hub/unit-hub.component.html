<!-- HEADER/NAVIGATION -->

<ng-container *ngIf="route.children.length === 0">
    <app-header></app-header>
    <body id="unit-hub">
    <div class="filter-container">
        <!-- first associate DISCRETE VALUES with EACH CHECKBOX to TOGGLE ON/OFF STATE  -->
        <div *ngFor="let t of themesFromCms, let i = index" class="allthemes">

            <!-- || = "or" operation  -->
            <div *ngIf="t.perspective || t.podcast ||Â t.project" id="themes_collection">

                <!-- when CHECKED, compare CHECKED VALUES against the PROPERTIES found within the ARRAY OF OBJECTS -->
                <div class="checkbox" > 
                    <input type="checkbox" 
                        name="toggle-themes" 
                        [id]="t.id" 
                        [(ngModel)]="t.selected" 
                        [value]="t.theme_name" 
                        (change)="getSelected()">
                </div>
                
                <label
                    [for]="t.id"
                    id="unit-theme-selected-{{t.id}}"
                    [class.visited]="t.selected"
                    class="themes">
                    {{t.theme_name}}
                </label>
            </div>
        </div>
    
    <!-- [class.visited]="isVisited == true" (click) = "checkVisited()" -->
    <!-- using ngFor to call a checked method that returns the checked filtered items -->
    <pre>Selected themes: <span *ngFor="let t of themesSelected" style="padding-right:10px;">{{ t.theme_name }}</span></pre>
        
    </div>

    <ng-container *ngIf="units" class="">

        <!-- FILTER UNITS ACCORDING TO SELECTED THEMES -->
        <div [ngClass]= " { 'perspectives'  : u.unit_type === 'perspective',
                            'projects'     : u.unit_type === 'project',
                            'podcasts'     : u.unit_type === 'podcast'   } "
              *ngFor= " let u of units " 
              class= " unit " >

                <!-- PODCAST UNIT -->
                <div *ngIf="u.unit_type === 'podcast'" class="u-podcast">
                    <div *ngFor="episode of podcasts, let p = index">
                        <img class="offline_podcast_logo" src="{{apiUrl}}{{podcasts[p].offline_episode_logo.url}}">
                        
                        <div class="unit-title" id="podcast-title">
                            {{u.title}}
                        </div>
                        
                        <div class="unit-name" id="podcast-speakers" >
                            {{u.speakers}}
                        </div>




                    </div>
                </div>

                <!-- <div class="unit-title"></div> -->
                <div class="unit-name">{{u.artist}} {{u.author}}</div>

                <!-- routerLinkActive="active"  -->
                <a [routerLink]="['/units/' + u.unit_type, u.id]" class="unit-title">{{u.title}}</a>
                <div class="unit-type">[ {{u.unit_type}} ]</div>
                
                <div class="unit-theme-container">
                        <div *ngFor="let ut of u.themes" 
                            [class.visited]="ut.selected"
                             class="unit-themes">
                            {{ut.theme_name}}
                        </div>
                </div>

        </div>

    </ng-container>
</body>

</ng-container>


<router-outlet></router-outlet>

