<div class="project-page">

    <button class="btn-back2hub">
        <span class="btn-icon">&#10229;</span>
        <a [routerLink]="['/units/']" class="btn-txt">Hub</a>
    </button>

    <!-- PERSPECTIVE HEADER ---------------------------------------------- -->
    <div *ngIf="perspective" class="perspective_header">
                <h3 class="p_title" *ngIf="perspective.title?.length">{{ perspective.title }}</h3>
                <h3 class="p_author" *ngIf="perspective.author?.length">{{ perspective.author }}</h3>
                <div class="perspective-theme-container">
                    <div *ngFor="let t of perspective.themes" class="themes">{{t.theme_name}}</div>
                </div>
    </div>

    <body class="main">
        <ng-container *ngFor="let body of perspective.body, let i = index" 
        class=""> 

        <!-- COMPONENT > "CONTENT" ---------------------------------------------------- -->
            <div *ngIf=" perspective.body[i].__component === 'single-page-component.content'" 
            class="perspective_component perspective_API_content section-grid">

                <!-- BODY[i].INTRO -->
                <div class="comp_intro_container" *ngIf="perspective.body[i].intro !== null">
                    <ng-container class="comp_intro" *ngIf="perspective.body[i].intro.text?.length">
                        {{ perspective.body[i].intro.text }}
                    </ng-container> 
                </div>

                <!-- BODY[i].TEXTBLOCK.SUBHEAD -->
                <h3 class="comp_subhead" *ngIf="perspective.body[i].textblock.subhead?.length">
                    {{ perspective.body[i].textblock.subhead }}
                </h3>
                
                <!-- BODY[i].TEXTBLOCK.PARAGRAPH -->
                <div    [ngClass]=" {   'comp_textblock'            : perspective.body[i].machine_text == null, 
                                        'comp_textblock_machine'    : perspective.body[i].machine_text !== null, 
                                        'comp_textblock_remark'     : perspective.body[i].article_remark?.length,
                                        'comp_textblock_relation'   : perspective.body[i].relation_to_project?.length } " 
                        *ngIf=    "perspective.body[i].textblock.paragraph?.length" >

                    <!-- MACHINE-GENERATED content is called out here -->
                    <ng-container *ngIf="perspective.body[i].machine_text !== null">
                        <div class="txt_m_container">
                            <div id="circle1"></div>
                            <span class="comp_m_output">
                                <span class="comp_m_title" *ngIf="perspective.body[i].machine_text.seed?.length">
                                    {{ perspective.body[i].machine_text.seed}}
                                </span>
                                {{ perspective.body[i].machine_text.output }}
                            </span>
                            <span class="comp_m_output ghost">
                                <span class="comp_m_title" *ngIf="perspective.body[i].machine_text.seed?.length">
                                    {{ perspective.body[i].machine_text.seed}}
                                </span>
                                {{ perspective.body[i].machine_text.output }}
                            </span>
                        </div>
                    </ng-container>

                    <!-- ARTICLE REMARK is called out here (Type Array)-->
                    <ng-container *ngFor="let remark of perspective.body[i].article_remark, let r = index">
                        <div class="remark_container">
                            <code class="comp_remark c_r_title">
                                {{ perspective.body[i].article_remark[r].title}}
                            </code>
                            <div class="comp_remark c_r_text">
                                {{ perspective.body[i].article_remark[r].text}}
                            </div>
                        </div>
                    </ng-container>

                    <!-- PROJECT RELATION is called out here (Type Array)-->
                    <ng-container *ngFor="let relation of perspective.body[i].relation_to_project, let c = index">
                        <div class="relation_container">
                            <div class="comp_relation">
                                <div class="relation_projectname">
                                    {{ perspective.body[i].relation_to_project[c].project_name }}
                                </div>
                                <div class="relation_artistname">
                                    {{ perspective.body[i].relation_to_project[c].artist_name }}
                                    <div class="relation_arrow">&#10230;</div>
                                </div>
                                <!-- NEEDS FIX!!! -->
                                <img class="relation_project_img" src="{{apiUrl}}{{perspective.body[i].relation_to_project[c].project_image.formats.small.url}}"> 
                            </div>
                        </div>

                    </ng-container>

                    <!-- TEXT PARAGRAPH called out here (Type Array)-->
                    <div class="comp_textblock_paragraph">
                        <markdown>{{ perspective.body[i].textblock.paragraph }}</markdown>
                    </div>
                </div>
                

            </div>



        <!-- COMPONENT > "TEXTBLOCK" --------------------------------------------------- -->
            <div *ngIf=" perspective.body[i].__component === 'single-page-component.textblock'" 
            class="perspective_component perspective_API_textblock section-grid">
                <div class="comp_textblock">
                    <h3 class="comp_subhead" *ngIf="perspective.body[i].subhead?.length">{{ perspective.body[i].subhead }}</h3>
                    <p class="comp_textblock_paragraph" *ngIf="perspective.body[i].paragraph?.length">{{ perspective.body[i].paragraph }}</p>
                </div>
            </div>

    <!-- __component: machine-generated ------------------------------------------ -->
            <!-- <div *ngIf=" perspective.body[i].__component === 'single-page-component.machine-generated'" 
            class="perspective_component perspective_API_machine_generated section-grid"> -->
                <!-- <span class="p_m_title" *ngIf="perspective.body[i].title?.length">{{ perspective.body[i].title}}</span> -->
                <!-- <p class="p_m_text" *ngIf="perspective.body[i].text?.length"><span class="p_m_title" *ngIf="perspective.body[i].title?.length">{{ perspective.body[i].title}}</span>{{ perspective.body[i].text }}</p>
                <p class="p_m_json" *ngIf="perspective.body[i].text_json?.length">{{ perspective.body[i].text_json }}</p>
            </div> -->

    <!-- __component: media ------------------------------------------------------ -->
            <div *ngIf=" perspective.body[i].__component === 'single-page-component.media'" 
            class="perspective_component perspective_API_media">
                <div *ngFor="let image of perspective.body[i].project_media, let b = index"> 
                    <img src="{{ apiUrl }}{{ perspective.body[i].project_media[b].formats.medium.url }}" alt="">
                </div>
            </div>

    <!-- __component: remark ------------------------------------------------------ -->
            <div *ngIf=" perspective.body[i].__component === 'single-page-component.remark'" 
            class="perspective_component perspective_API_remark">
                body > remark: not yet added
            </div>

    <!-- __component: relation ---------------------------------------------------- -->
            <div *ngIf=" perspective.body[i].__component === 'single-page-component.relation'" 
            class="perspective_component perspective_API_relation">
                body > relation: not yet added
            </div>
        </ng-container>
            
    </body>

</div>
<router-outlet></router-outlet>